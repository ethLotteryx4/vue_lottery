webpackJsonp([1],{0:function(t,e){},"0mQA":function(t,e){},"3Xrl":function(t,e){},"6WzO":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},r,!1,function(t){n("0mQA")},null,null).exports,i=n("/ocq"),u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),n("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),n("br"),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},u,!1,function(t){n("RqNW")},"data-v-3b884edb",null).exports;var o=n("Xxa5"),l=n.n(o),c=n("exGp"),p=n.n(c),f={name:"Cell",props:["number"],data:function(){return{value:0}},methods:{trim:function(){/^[0-9]+$/.test(this.value)?this.value=parseInt(this.value):this.value=0}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cell"},[n("span",{staticClass:"number"},[t._v(" "+t._s(t.number)+" ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"count",attrs:{type:"number",step:"1",min:"0"},domProps:{value:t.value},on:{blur:t.trim,input:function(e){e.target.composing||(t.value=e.target.value)}}})])},staticRenderFns:[]};var v={name:"Row",components:{Cell:n("VU/8")(f,h,!1,function(t){n("gLpp")},null,null).exports},props:["row_id"],data:function(){return{numbers:[]}},created:function(){for(var t=10*this.row_id;t<10*this.row_id+10;++t)this.numbers.push(t)},methods:{debug:function(){console.log(this.row_id)},form_data:function(){var t=[];return this.$refs.cell.forEach(function(e){t.push({num:e.number,value:e.value})}),t}}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},this._l(this.numbers,function(t){return e("div",{key:t},[e("Cell",{ref:"cell",refInFor:!0,attrs:{number:t+1}})],1)}),0)},staticRenderFns:[]};var d,y,_,b={name:"Form",components:{Row:n("VU/8")(v,m,!1,function(t){n("NLLL")},null,null).exports},data:function(){return{rows:[]}},created:function(){for(var t=0;t<10;++t)this.rows.push(t)},methods:{form_data:function(){var t=[];return this.$refs.row.forEach(function(e){e.form_data().forEach(function(e){t.push(e)})}),t}}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form"},this._l(this.rows,function(t){return e("div",{key:t},[e("Row",{ref:"row",refInFor:!0,attrs:{row_id:t}})],1)}),0)},staticRenderFns:[]},w=n("VU/8")(b,g,!1,null,null,null).exports,k=n("fZjL"),x=n.n(k),C=(n("4fta"),n("RCuH")),T="",M={},$=new C(new C.providers.HttpProvider("https://convincing-little-rain.ethereum-goerli.discover.quiknode.pro/bdd296e11ef9077b6b9c1425610d917c817f0776/")),E=[{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"buy",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256[100]",name:"tot",type:"uint256[100]"}],name:"enter",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address payable",name:"i",type:"address"},{internalType:"uint256",name:"m",type:"uint256"}],name:"pay",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"pickWinner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"getBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getHistory",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"address[]",name:"",type:"address[]"},{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlayer",outputs:[{internalType:"address payable[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRandomNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lotteryy",type:"uint256"}],name:"getWinnerById",outputs:[{internalType:"address payable[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"add",type:"address"}],name:"getWinnerMoneyByAddress",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lotteryid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"lotteryinfo",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"own",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"peopleinfo",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"players",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"winnerhistory",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"winnum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],F=(d=p()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==window.ethereum){t.next=6;break}return alert("请先安装MetaMask,再访问次网站!"),window.location.replace("https://metamask.io/"),t.abrupt("return",!1);case 6:return t.next=8,ethereum.enable().catch(function(t){return"User rejected provider access"===t?console.log("拒绝登录！"):alert("There was a problem signing you in"),!1});case 8:return e=t.sent,$.eth.defaultAccount=e[0],M=new $.eth.Contract(E,"0xBfDf85cEbFB2811a94Ff98287B946A57a4bc17cC"),T=e[0],t.abrupt("return",!0);case 13:case"end":return t.stop()}},t,this)})),function(){return d.apply(this,arguments)}),R=(y=p()(l.a.mark(function t(e,n){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(B(n)){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,new $.eth.Contract(E,"0xBfDf85cEbFB2811a94Ff98287B946A57a4bc17cC",{from:n,gas:"3000000",gasPrice:"1000000",value:0});case 5:return M=t.sent,t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(2),M={},$.eth.accounts.wallet.clear(),console.log(t.t0),t.abrupt("return",!1);case 15:case"end":return t.stop()}},t,this,[[2,9]])})),_=p()(l.a.mark(function t(e){var n,a,r,s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(console.log(e),n=e.length,a=Array(100).fill(0),r=0,s=0;s<n;s++)a[e[s].num-1]=e[s].value,r+=e[s].value;return t.t0=M.methods.enter(a),t.t1=T,t.t2=$.utils.toHex("3000000"),t.t3=$.utils.toHex(r),t.next=11,$.eth.getTransactionCount($.eth.defaultAccount);case 11:return t.t4=t.sent,t.t5={from:t.t1,gasLimit:t.t2,value:t.t3,nonce:t.t4},t.next=15,t.t0.send.call(t.t0,t.t5);case 15:case"end":return t.stop()}},t,this)})),function(t){return _.apply(this,arguments)}),V=[];function A(t){for(var e=parseInt(t[0]),n=Array(e),a=0,r=0;r<e;r++){n[r]={phase:r,number:t[2][r],phase_data:Array()};for(var s=0;s<parseInt(t[1][r]);s++){var i={id:t[3][a+s],money:t[4][a+s]};n[r].phase_data.push(i)}a+=parseInt(t[1][r])}return n}var j,H,P=(j=p()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.methods.getHistory().call({from:T}).then(function(t){V=A(t)});case 2:return t.abrupt("return",V);case 3:case"end":return t.stop()}},t,this)})),function(){return j.apply(this,arguments)}),I={phase:0,pool:0},U=(H=p()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.methods.getBalance().call({from:T}).then(function(t){I.pool=t});case 2:return t.next=4,M.methods.getId().call({from:T}).then(function(t){I.phase=t});case 4:return t.abrupt("return",I);case 5:case"end":return t.stop()}},t,this)})),function(){return H.apply(this,arguments)});function B(t){return $.utils.isAddress(t)}function L(){return 0!=x()(M).length}var N={name:"Dialog",data:function(){return{pk:"",detailVisible:!0}},mounted:function(){this.pk=localStorage.getItem("pk")},methods:{inputPK:function(){this.detailVisible=!0},save:function(){var t;localStorage.setItem("pk",this.pk),t=this.pk,$.eth.accounts.wallet.add(t)},close:function(){this.detailVisible=!1}}},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.detailVisible?n("div",{staticClass:"shadow"},[n("div",{staticClass:"dialog",attrs:{footer:null}},[n("span",{staticClass:"dialogDesc"},[t._v("\n            请输入您的私钥\n        ")]),t._v(" "),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pk,expression:"pk"}],staticClass:"pk",attrs:{type:"text",placeholder:"private-key"},domProps:{value:t.pk},on:{blur:t.save,input:function(e){e.target.composing||(t.pk=e.target.value)}}}),t._v(" "),n("br"),t._v(" "),n("button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")])])]):t._e()},staticRenderFns:[]};var D=n("VU/8")(N,W,!1,function(t){n("eTbQ")},null,null).exports,S={name:"Store",components:{Form:w,Dialog:D},data:function(){return{rows:[]}},mounted:function(){this.login(),localStorage.getItem("pk")||this.$parent.$refs.dialog.inputPK()},methods:{login:function(){var t=this;return p()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!L()){e.next=3;break}return alert("已经登录！请勿重复登录！"),e.abrupt("return");case 3:return e.next=5,F();case 5:e.sent?(alert("登录成功！"),t.$parent.$refs.pool.refresh(),t.$parent.$refs.chain.refresh()):alert("登录失败！");case 7:case"end":return e.stop()}},e,t)}))()},submit:function(){var t=this;if(L()){var e=this.$refs.form.form_data(),n=!0;R(e).catch(function(e){t.$parent.$refs.dialog.inputPK(),alert("请检查私钥是否正确！"),n=!1}).then(function(){n&&alert("购买成功！")})}else alert("请先登录！")}}},X={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"store"},[e("Form",{ref:"form"}),this._v(" "),e("div",{staticClass:"hstack"},[e("button",{staticClass:"buy",on:{click:this.submit}},[this._v("购买")])])],1)},staticRenderFns:[]};var K={name:"Pool",data:function(){return{pool:0,phase:0,bg:n("X9o/")}},methods:{refresh:function(){var t=this;return p()(l.a.mark(function e(){var n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L()){e.next=3;break}return alert("请先登录！"),e.abrupt("return");case 3:return e.next=5,U();case 5:n=e.sent,(a=/^[0-9]+[.]?[0-9]*$/).test(n.phase)&&(t.phase=n.phase),a.test(n.pool)&&(t.pool=n.pool);case 9:case"end":return e.stop()}},e,t)}))()}}},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pool",style:{backgroundRepeat:"no-repeat",backgroundSize:"100%, 100%"}},[n("span",{staticClass:"desc"},[t._v("\n        当前第"+t._s(t.phase)+"期奖池:\n    ")]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"pool",on:{click:t.refresh}},[t._v("\n        "+t._s(t.pool)+"\n    ")]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"info"},[t._v("\n        (点击刷新当前奖池大小, 单位wei)\n    ")])])},staticRenderFns:[]};var z={nema:"Chain",data:function(){return{chain_data:[]}},methods:{refresh:function(){var t=this;return p()(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("refreshed chain data"),L()){e.next=4;break}return alert("请先登录！"),e.abrupt("return");case 4:return e.next=6,P();case 6:n=e.sent,t.chain_data=[],n.forEach(function(e){0==e.phase_data.length&&t.chain_data.push({phase:e.phase+1,winner:"无人中奖，奖池累计",money:0,number:e.number}),e.phase_data.forEach(function(n){t.chain_data.push({phase:e.phase+1,winner:n.id,money:n.money,number:e.number})})});case 9:case"end":return e.stop()}},e,t)}))()}}},Q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chain"},[n("button",{staticClass:"refresh",on:{click:t.refresh}},[t._v("点击刷新历史信息")]),t._v(" "),n("table",[n("caption",[n("font",{attrs:{size:"5",color:"#ffffff"}},[n("b",[t._v("以往中奖信息查询")])])],1),t._v(" "),t._m(0),t._v(" "),n("tbody",t._l(this.chain_data,function(e,a){return n("tr",{key:a},[n("th",[t._v("\n                        "+t._s(e.phase)+"\n                    ")]),t._v(" "),n("th",[t._v("\n                        "+t._s(e.winner)+"\n                    ")]),t._v(" "),n("th",[t._v("\n                        "+t._s(e.money)+"\n                    ")]),t._v(" "),n("th",[t._v("\n                        "+t._s(e.number)+"\n                    ")])])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("中奖期数")]),this._v(" "),e("th",[this._v("中奖者")]),this._v(" "),e("th",[this._v("中奖金额")]),this._v(" "),e("th",[this._v("中奖号码")])])])}]};var G={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-foot"},[e("span",[this._v("\n      "+this._s(this.footerMsgCopyright)+"\n        "),e("br")]),this._v(" "),e("span",{staticClass:"source"},[this._v(this._s(this.footerMsgName))])])},staticRenderFns:[]};var O={name:"Home",components:{Store:n("VU/8")(S,X,!1,function(t){n("rKC8")},null,null).exports,Pool:n("VU/8")(K,q,!1,function(t){n("e6Go")},null,null).exports,Chain:n("VU/8")(z,Q,!1,function(t){n("6WzO")},null,null).exports,Foot:n("VU/8")({name:"Foot",data:function(){return{footerMsgCopyright:"本平台仅供课程展示用 - Powered By ",footerMsgName:" Chuanmx Miaohs Zhangjy Xiaht"}}},G,!1,function(t){n("h/3H")},"data-v-2bb26dfe",null).exports,Dialog:D}},Z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"home"}},[e("Dialog",{ref:"dialog"}),this._v(" "),e("span",{staticClass:"title"},[this._v("ETH 大乐透")]),this._v(" "),e("Store"),this._v(" "),e("Pool",{ref:"pool"}),this._v(" "),e("Chain",{ref:"chain"}),this._v(" "),e("Foot")],1)},staticRenderFns:[]};var J=n("VU/8")(O,Z,!1,function(t){n("3Xrl")},null,null).exports;a.a.use(i.a);var Y=new i.a({routes:[{path:"/",name:"Home",component:J}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:Y,components:{App:s},template:"<App/>"})},NLLL:function(t,e){},RqNW:function(t,e){},"X9o/":function(t,e,n){t.exports=n.p+"../img/red_pack.46814c9.png"},e6Go:function(t,e){},eTbQ:function(t,e){},gLpp:function(t,e){},"h/3H":function(t,e){},rKC8:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e91f83499dcf434d8821.js.map