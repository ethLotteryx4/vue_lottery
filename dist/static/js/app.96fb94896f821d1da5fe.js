webpackJsonp([1],{"0mQA":function(t,e){},"7x5L":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},a,!1,function(t){n("0mQA")},null,null).exports,i=n("/ocq"),u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),n("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),n("br"),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},u,!1,function(t){n("RqNW")},"data-v-3b884edb",null).exports;var o=n("Xxa5"),c=n.n(o),l=n("exGp"),p=n.n(l),h={name:"Cell",props:["number"],data:function(){return{value:0}},methods:{trim:function(){/^[0-9]+$/.test(this.value)?this.value=parseInt(this.value):this.value=0}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cell"},[n("span",{staticClass:"number"},[t._v(" "+t._s(t.number)+" ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"count",attrs:{type:"number",step:"1",min:"0"},domProps:{value:t.value},on:{blur:t.trim,input:function(e){e.target.composing||(t.value=e.target.value)}}})])},staticRenderFns:[]};var v={name:"Row",components:{Cell:n("VU/8")(h,f,!1,function(t){n("gLpp")},null,null).exports},props:["row_id"],data:function(){return{numbers:[]}},created:function(){for(var t=10*this.row_id;t<10*this.row_id+10;++t)this.numbers.push(t)},methods:{debug:function(){console.log(this.row_id)},form_data:function(){var t=[];return this.$refs.cell.forEach(function(e){t.push({num:e.number,value:e.value})}),t}}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},this._l(this.numbers,function(t){return e("div",{key:t},[e("Cell",{ref:"cell",refInFor:!0,attrs:{number:t+1}})],1)}),0)},staticRenderFns:[]};var d,y,_,b,g={name:"Form",components:{Row:n("VU/8")(v,m,!1,function(t){n("NLLL")},null,null).exports},data:function(){return{rows:[]}},created:function(){for(var t=0;t<10;++t)this.rows.push(t)},methods:{form_data:function(){var t=[];return this.$refs.row.forEach(function(e){e.form_data().forEach(function(e){t.push(e)})}),t}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form"},this._l(this.rows,function(t){return e("div",{key:t},[e("Row",{ref:"row",refInFor:!0,attrs:{row_id:t}})],1)}),0)},staticRenderFns:[]},x=n("VU/8")(g,w,!1,null,null,null).exports,C=n("fZjL"),k=n.n(C),T=n("RCuH"),M={},$=new T(new T.providers.HttpProvider("https://goerli.infura.io/v3/d602fa919c86441581fd91bf2e84f513")),E=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256[100]",name:"tot",type:"uint256[100]"}],name:"enter",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"getBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getHistory",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"address[]",name:"",type:"address[]"},{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlayer",outputs:[{internalType:"address payable[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRandomNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lotteryy",type:"uint256"}],name:"getWinnerById",outputs:[{internalType:"address payable[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"add",type:"address"}],name:"getWinnerMoneyByAddress",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lotteryid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"lotteryinfo",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"own",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"peopleinfo",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pickWinner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"players",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"winnerhistory",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"winnum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],F=(y=p()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==window.ethereum){t.next=6;break}return alert("请先安装MetaMask,再访问次网站!"),window.location.replace("https://metamask.io/"),t.abrupt("return",!1);case 6:return t.next=8,ethereum.enable().catch(function(t){return"User rejected provider access"===t||alert("There was a problem signing you in"),!1}).then(function(t){var e=$.currentProvider;return $.setProvider(e),$.eth.defaultAccount=t[0],M=new $.eth.Contract(E,"0x29140dee78f11c73A1453eD008CCB65ceCC3c0A9"),d=t[0],!0});case 8:return t.abrupt("return",null!=d);case 9:case"end":return t.stop()}},t,this)})),function(){return y.apply(this,arguments)}),R=(_=p()(c.a.mark(function t(e,n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(N(n)){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,new $.eth.Contract(E,"0x29140dee78f11c73A1453eD008CCB65ceCC3c0A9",{from:n,gas:3e6,gasPrice:"10000000000",value:0});case 5:return M=t.sent,t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(2),M={},$.eth.accounts.wallet.clear(),console.log(t.t0),t.abrupt("return",!1);case 15:case"end":return t.stop()}},t,this,[[2,9]])})),b=p()(c.a.mark(function t(e){var n,r,a,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,console.log(e),n=e.length,r=Array(100).fill(0),a=0,s=0;s<n;s++)r[e[s].num-1]=e[s].value,a+=e[s].value;return console.log(a),console.log(r),t.next=10,M.methods.enter(r).send({from:d,gas:3e6,gasPrice:"10000000000",value:a});case 10:return t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 17:case"end":return t.stop()}},t,this,[[0,13]])})),function(t){return b.apply(this,arguments)}),A=[];function j(t){console.log(t);var e=parseInt(t[0]);console.log(e);for(var n=Array(e),r=0,a=0;a<e;a++){n[a]={phase:a,number:t[2][a],phase_data:Array()};for(var s=0;s<parseInt(t[1][a]);s++){var i={id:t[3][r+s],money:t[4][r+s]};n[a].phase_data.push(i)}r+=parseInt(t[1][a])}return console.log(n),n}var H,V,L=(H=p()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.methods.getHistory().call({from:d}).then(function(t){A=j(t)});case 2:return console.log(A),t.abrupt("return",A);case 4:case"end":return t.stop()}},t,this)})),function(){return H.apply(this,arguments)}),P={phase:0,pool:0},U=(V=p()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.methods.getBalance().call({from:d}).then(function(t){P.pool=t});case 2:return t.next=4,M.methods.getId().call({from:d}).then(function(t){P.phase=t});case 4:return t.abrupt("return",P);case 5:case"end":return t.stop()}},t,this)})),function(){return V.apply(this,arguments)});function N(t){return $.utils.isAddress(t)}function I(){return 0!=k()(M).length}var W={name:"Store",components:{Form:x},data:function(){return{rows:[]}},mounted:function(){this.login()},methods:{login:function(){var t=this;return p()(c.a.mark(function e(){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!I()){e.next=3;break}return alert("已经登录！请勿重复登录！"),e.abrupt("return");case 3:return e.next=5,F();case 5:n=e.sent,console.log(n),n?(alert("登录成功！"),t.$parent.$refs.pool.refresh(),t.$parent.$refs.chain.refresh()):alert("登录失败！");case 8:case"end":return e.stop()}},e,t)}))()},submit:function(){if(I()){var t=this.$refs.form.form_data();R(t)?alert("购买成功！"):alert("购买失败")}else alert("请先登录！")}}},B={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"store"},[e("Form",{ref:"form"}),this._v(" "),e("div",{staticClass:"hstack"},[e("button",{staticClass:"buy",on:{click:this.submit}},[this._v("购买")])])],1)},staticRenderFns:[]};var S={name:"Pool",data:function(){return{pool:0,phase:0,bg:n("X9o/")}},methods:{refresh:function(){var t=this;return p()(c.a.mark(function e(){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I()){e.next=3;break}return alert("请先登录！"),e.abrupt("return");case 3:return e.next=5,U();case 5:n=e.sent,(r=/^[0-9]+[.]?[0-9]*$/).test(n.phase)&&(t.phase=n.phase),r.test(n.pool)&&(t.pool=n.pool);case 9:case"end":return e.stop()}},e,t)}))()}}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pool",style:{backgroundRepeat:"no-repeat",backgroundSize:"100%, 100%"}},[n("span",{staticClass:"desc"},[t._v("\n        当前第"+t._s(t.phase)+"期奖池:\n    ")]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"pool",on:{click:t.refresh}},[t._v("\n        "+t._s(t.pool)+"\n    ")]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"info"},[t._v("\n        (点击刷新当前奖池大小, 单位wei)\n    ")])])},staticRenderFns:[]};var X={nema:"Chain",data:function(){return{chain_data:[]}},methods:{refresh:function(){var t=this;return p()(c.a.mark(function e(){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("refreshed chain data"),I()){e.next=4;break}return alert("请先登录！"),e.abrupt("return");case 4:return e.next=6,L();case 6:n=e.sent,t.chain_data=[],console.log(n),n.forEach(function(e){0==e.phase_data.length&&t.chain_data.push({phase:e.phase+1,winner:"无人中奖，奖池累计",money:0,number:e.number}),e.phase_data.forEach(function(n){t.chain_data.push({phase:e.phase+1,winner:n.id,money:n.money,number:e.number})})});case 10:case"end":return e.stop()}},e,t)}))()}}},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chain"},[n("button",{staticClass:"refresh",on:{click:t.refresh}},[t._v("点击刷新历史信息")]),t._v(" "),n("table",[n("caption",[n("font",{attrs:{size:"5",color:"#ffffff"}},[n("b",[t._v("以往中奖信息查询")])])],1),t._v(" "),t._m(0),t._v(" "),n("tbody",t._l(this.chain_data,function(e,r){return n("tr",{key:r},[n("th",[t._v("\n                        "+t._s(e.phase)+"\n                    ")]),t._v(" "),n("th",[t._v("\n                        "+t._s(e.winner)+"\n                    ")]),t._v(" "),n("th",[t._v("\n                        "+t._s(e.money)+"\n                    ")]),t._v(" "),n("th",[t._v("\n                        "+t._s(e.number)+"\n                    ")])])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("中奖期数")]),this._v(" "),e("th",[this._v("中奖者")]),this._v(" "),e("th",[this._v("中奖金额")]),this._v(" "),e("th",[this._v("中奖号码")])])])}]};var G={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-foot"},[e("span",[this._v("\n      "+this._s(this.footerMsgCopyright)+"\n        "),e("br")]),this._v(" "),e("span",{staticClass:"source"},[this._v(this._s(this.footerMsgName))])])},staticRenderFns:[]};var z={name:"Home",components:{Store:n("VU/8")(W,B,!1,function(t){n("V6HF")},null,null).exports,Pool:n("VU/8")(S,D,!1,function(t){n("e6Go")},null,null).exports,Chain:n("VU/8")(X,q,!1,function(t){n("7x5L")},null,null).exports,Foot:n("VU/8")({name:"Foot",data:function(){return{footerMsgCopyright:"本平台仅供课程展示用 - Powered By ",footerMsgName:" Chuanmx Miaohs Zhangjy Xiaht"}}},G,!1,function(t){n("h/3H")},"data-v-2bb26dfe",null).exports}},Q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"home"}},[e("span",{staticClass:"title"},[this._v("ETH 大乐透")]),this._v(" "),e("Store"),this._v(" "),e("Pool",{ref:"pool"}),this._v(" "),e("Chain",{ref:"chain"}),this._v(" "),e("Foot")],1)},staticRenderFns:[]};var Z=n("VU/8")(z,Q,!1,function(t){n("SCvR")},null,null).exports;r.a.use(i.a);var J=new i.a({routes:[{path:"/",name:"Home",component:Z}]});r.a.config.productionTip=!1,new r.a({el:"#app",router:J,components:{App:s},template:"<App/>"})},NLLL:function(t,e){},RqNW:function(t,e){},SCvR:function(t,e){},V6HF:function(t,e){},"X9o/":function(t,e,n){t.exports=n.p+"static/img/red_pack.46814c9.png"},e6Go:function(t,e){},gLpp:function(t,e){},"h/3H":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.96fb94896f821d1da5fe.js.map